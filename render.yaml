services:
  # Web service for the PHP application
  - type: web
    name: php-app
    env: docker
    dockerfilePath: ./Dockerfile
    plan: free # Or your preferred plan
    envVars:
      - key: DB_HOST
        value: mysql-db # Use the service name as the hostname
      - key: DB_USERNAME
        value: root
      - key: DB_PASSWORD
        value: "your_strong_password_here" # IMPORTANT: Replace with a strong password and use the same value below
      - key: DB_NAME
        value: dcma

  # Private service for the MySQL database
  - type: pserv
    name: mysql-db
    env: docker
    dockerfilePath: ./Dockerfile.mysql
    plan: free # Or your preferred plan
    # NOTE: The free plan does not support persistent disks.
    # This means your database will be reset on every deploy.
    # For data persistence, you would need a paid plan or an external database.
    envVars:
      - key: MYSQL_ROOT_PASSWORD
        value: "your_strong_password_here" # IMPORTANT: Use the same password as above
      - key: MYSQL_DATABASE
        value: dcma
